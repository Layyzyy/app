{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [patient, setPatientState] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      // Load user from storage on mount\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const storedUser = await AsyncStorage.default.getItem('user');\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedPatient = await AsyncStorage.default.getItem('patient');\n        if (storedUser && storedToken) {\n          setUser(JSON.parse(storedUser));\n          setToken(storedToken);\n          if (storedPatient) {\n            setPatientState(JSON.parse(storedPatient));\n          }\n        }\n      } catch (error) {\n        console.error('Load user error:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (phone, otp) => {\n      try {\n        const response = await fetch(`${_expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL}/api/auth/verify`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            phone,\n            otp\n          })\n        });\n        const data = await response.json();\n        if (data.success) {\n          setUser(data.user);\n          setToken(data.token);\n          await AsyncStorage.default.setItem('user', JSON.stringify(data.user));\n          await AsyncStorage.default.setItem('token', data.token);\n          return true;\n        }\n        return false;\n      } catch (error) {\n        console.error('Login error:', error);\n        return false;\n      }\n    };\n    const logout = async () => {\n      setUser(null);\n      setToken(null);\n      setPatientState(null);\n      await AsyncStorage.default.multiRemove(['user', 'token', 'patient']);\n    };\n    const setPatient = async patient => {\n      setPatientState(patient);\n      await AsyncStorage.default.setItem('patient', JSON.stringify(patient));\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        patient,\n        token,\n        login,\n        logout,\n        setPatient,\n        isLoading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"C3/xC2oQsQGBbaTEG6u4LNs+Ifc=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":119,"map":[[15,2,23,0,"exports"],[15,9,23,0],[15,10,23,0,"AuthProvider"],[15,22,23,0],[15,25,23,0,"AuthProvider"],[15,37,23,0],[16,2,97,0,"exports"],[16,9,97,0],[16,10,97,0,"useAuth"],[16,17,97,0],[16,20,97,0,"useAuth"],[16,27,97,0],[17,2,103,1],[17,6,103,1,"_expoVirtualEnv"],[17,21,103,1],[17,24,103,1,"require"],[17,31,103,1],[17,32,103,1,"_dependencyMap"],[17,46,103,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,2,69],[21,6,2,69,"_reactJsxDevRuntime"],[21,25,2,69],[21,28,2,69,"require"],[21,35,2,69],[21,36,2,69,"_dependencyMap"],[21,50,2,69],[22,2,21,0],[22,8,21,6,"AuthContext"],[22,19,21,17],[22,35,21,20],[22,39,21,20,"createContext"],[22,45,21,33],[22,46,21,33,"createContext"],[22,59,21,33],[22,61,21,63,"undefined"],[22,70,21,72],[22,71,21,73],[23,2,23,7],[23,11,23,16,"AuthProvider"],[23,23,23,28,"AuthProvider"],[23,24,23,29],[24,4,23,31,"children"],[25,2,23,71],[25,3,23,72],[25,5,23,74],[26,4,23,74,"_s"],[26,6,23,74],[27,4,24,2],[27,10,24,8],[27,11,24,9,"user"],[27,15,24,13],[27,17,24,15,"setUser"],[27,24,24,22],[27,25,24,23],[27,28,24,26],[27,32,24,26,"useState"],[27,38,24,34],[27,39,24,34,"useState"],[27,47,24,34],[27,49,24,48],[27,53,24,52],[27,54,24,53],[28,4,25,2],[28,10,25,8],[28,11,25,9,"patient"],[28,18,25,16],[28,20,25,18,"setPatientState"],[28,35,25,33],[28,36,25,34],[28,39,25,37],[28,43,25,37,"useState"],[28,49,25,45],[28,50,25,45,"useState"],[28,58,25,45],[28,60,25,58],[28,64,25,62],[28,65,25,63],[29,4,26,2],[29,10,26,8],[29,11,26,9,"token"],[29,16,26,14],[29,18,26,16,"setToken"],[29,26,26,24],[29,27,26,25],[29,30,26,28],[29,34,26,28,"useState"],[29,40,26,36],[29,41,26,36,"useState"],[29,49,26,36],[29,51,26,52],[29,55,26,56],[29,56,26,57],[30,4,27,2],[30,10,27,8],[30,11,27,9,"isLoading"],[30,20,27,18],[30,22,27,20,"setIsLoading"],[30,34,27,32],[30,35,27,33],[30,38,27,36],[30,42,27,36,"useState"],[30,48,27,44],[30,49,27,44,"useState"],[30,57,27,44],[30,59,27,45],[30,63,27,49],[30,64,27,50],[31,4,29,2],[31,8,29,2,"useEffect"],[31,14,29,11],[31,15,29,11,"useEffect"],[31,24,29,11],[31,26,29,12],[31,32,29,18],[32,6,30,4],[33,6,31,4,"loadUser"],[33,14,31,12],[33,15,31,13],[33,16,31,14],[34,4,32,2],[34,5,32,3],[34,7,32,5],[34,9,32,7],[34,10,32,8],[35,4,34,2],[35,10,34,8,"loadUser"],[35,18,34,16],[35,21,34,19],[35,27,34,19,"loadUser"],[35,28,34,19],[35,33,34,31],[36,6,35,4],[36,10,35,8],[37,8,36,6],[37,14,36,12,"storedUser"],[37,24,36,22],[37,27,36,25],[37,33,36,31,"AsyncStorage"],[37,45,36,43],[37,46,36,43,"default"],[37,53,36,43],[37,54,36,44,"getItem"],[37,61,36,51],[37,62,36,52],[37,68,36,58],[37,69,36,59],[38,8,37,6],[38,14,37,12,"storedToken"],[38,25,37,23],[38,28,37,26],[38,34,37,32,"AsyncStorage"],[38,46,37,44],[38,47,37,44,"default"],[38,54,37,44],[38,55,37,45,"getItem"],[38,62,37,52],[38,63,37,53],[38,70,37,60],[38,71,37,61],[39,8,38,6],[39,14,38,12,"storedPatient"],[39,27,38,25],[39,30,38,28],[39,36,38,34,"AsyncStorage"],[39,48,38,46],[39,49,38,46,"default"],[39,56,38,46],[39,57,38,47,"getItem"],[39,64,38,54],[39,65,38,55],[39,74,38,64],[39,75,38,65],[40,8,40,6],[40,12,40,10,"storedUser"],[40,22,40,20],[40,26,40,24,"storedToken"],[40,37,40,35],[40,39,40,37],[41,10,41,8,"setUser"],[41,17,41,15],[41,18,41,16,"JSON"],[41,22,41,20],[41,23,41,21,"parse"],[41,28,41,26],[41,29,41,27,"storedUser"],[41,39,41,37],[41,40,41,38],[41,41,41,39],[42,10,42,8,"setToken"],[42,18,42,16],[42,19,42,17,"storedToken"],[42,30,42,28],[42,31,42,29],[43,10,43,8],[43,14,43,12,"storedPatient"],[43,27,43,25],[43,29,43,27],[44,12,44,10,"setPatientState"],[44,27,44,25],[44,28,44,26,"JSON"],[44,32,44,30],[44,33,44,31,"parse"],[44,38,44,36],[44,39,44,37,"storedPatient"],[44,52,44,50],[44,53,44,51],[44,54,44,52],[45,10,45,8],[46,8,46,6],[47,6,47,4],[47,7,47,5],[47,8,47,6],[47,15,47,13,"error"],[47,20,47,18],[47,22,47,20],[48,8,48,6,"console"],[48,15,48,13],[48,16,48,14,"error"],[48,21,48,19],[48,22,48,20],[48,40,48,38],[48,42,48,40,"error"],[48,47,48,45],[48,48,48,46],[49,6,49,4],[49,7,49,5],[49,16,49,14],[50,8,50,6,"setIsLoading"],[50,20,50,18],[50,21,50,19],[50,26,50,24],[50,27,50,25],[51,6,51,4],[52,4,52,2],[52,5,52,3],[53,4,54,2],[53,10,54,8,"login"],[53,15,54,13],[53,18,54,16],[53,24,54,16,"login"],[53,25,54,23,"phone"],[53,30,54,36],[53,32,54,38,"otp"],[53,35,54,49],[53,40,54,72],[54,6,55,4],[54,10,55,8],[55,8,56,6],[55,14,56,12,"response"],[55,22,56,20],[55,25,56,23],[55,31,56,29,"fetch"],[55,36,56,34],[55,37,56,35],[55,40,56,35,"_expoVirtualEnv"],[55,55,56,35],[55,56,56,35,"env"],[55,59,56,35],[55,60,56,35,"EXPO_PUBLIC_BACKEND_URL"],[55,83,56,35],[55,101,56,91],[55,103,56,93],[56,10,57,8,"method"],[56,16,57,14],[56,18,57,16],[56,24,57,22],[57,10,58,8,"headers"],[57,17,58,15],[57,19,58,17],[58,12,58,19],[58,26,58,33],[58,28,58,35],[59,10,58,54],[59,11,58,55],[60,10,59,8,"body"],[60,14,59,12],[60,16,59,14,"JSON"],[60,20,59,18],[60,21,59,19,"stringify"],[60,30,59,28],[60,31,59,29],[61,12,59,31,"phone"],[61,17,59,36],[62,12,59,38,"otp"],[63,10,59,42],[63,11,59,43],[64,8,60,6],[64,9,60,7],[64,10,60,8],[65,8,62,6],[65,14,62,12,"data"],[65,18,62,16],[65,21,62,19],[65,27,62,25,"response"],[65,35,62,33],[65,36,62,34,"json"],[65,40,62,38],[65,41,62,39],[65,42,62,40],[66,8,64,6],[66,12,64,10,"data"],[66,16,64,14],[66,17,64,15,"success"],[66,24,64,22],[66,26,64,24],[67,10,65,8,"setUser"],[67,17,65,15],[67,18,65,16,"data"],[67,22,65,20],[67,23,65,21,"user"],[67,27,65,25],[67,28,65,26],[68,10,66,8,"setToken"],[68,18,66,16],[68,19,66,17,"data"],[68,23,66,21],[68,24,66,22,"token"],[68,29,66,27],[68,30,66,28],[69,10,67,8],[69,16,67,14,"AsyncStorage"],[69,28,67,26],[69,29,67,26,"default"],[69,36,67,26],[69,37,67,27,"setItem"],[69,44,67,34],[69,45,67,35],[69,51,67,41],[69,53,67,43,"JSON"],[69,57,67,47],[69,58,67,48,"stringify"],[69,67,67,57],[69,68,67,58,"data"],[69,72,67,62],[69,73,67,63,"user"],[69,77,67,67],[69,78,67,68],[69,79,67,69],[70,10,68,8],[70,16,68,14,"AsyncStorage"],[70,28,68,26],[70,29,68,26,"default"],[70,36,68,26],[70,37,68,27,"setItem"],[70,44,68,34],[70,45,68,35],[70,52,68,42],[70,54,68,44,"data"],[70,58,68,48],[70,59,68,49,"token"],[70,64,68,54],[70,65,68,55],[71,10,69,8],[71,17,69,15],[71,21,69,19],[72,8,70,6],[73,8,71,6],[73,15,71,13],[73,20,71,18],[74,6,72,4],[74,7,72,5],[74,8,72,6],[74,15,72,13,"error"],[74,20,72,18],[74,22,72,20],[75,8,73,6,"console"],[75,15,73,13],[75,16,73,14,"error"],[75,21,73,19],[75,22,73,20],[75,36,73,34],[75,38,73,36,"error"],[75,43,73,41],[75,44,73,42],[76,8,74,6],[76,15,74,13],[76,20,74,18],[77,6,75,4],[78,4,76,2],[78,5,76,3],[79,4,78,2],[79,10,78,8,"logout"],[79,16,78,14],[79,19,78,17],[79,25,78,17,"logout"],[79,26,78,17],[79,31,78,29],[80,6,79,4,"setUser"],[80,13,79,11],[80,14,79,12],[80,18,79,16],[80,19,79,17],[81,6,80,4,"setToken"],[81,14,80,12],[81,15,80,13],[81,19,80,17],[81,20,80,18],[82,6,81,4,"setPatientState"],[82,21,81,19],[82,22,81,20],[82,26,81,24],[82,27,81,25],[83,6,82,4],[83,12,82,10,"AsyncStorage"],[83,24,82,22],[83,25,82,22,"default"],[83,32,82,22],[83,33,82,23,"multiRemove"],[83,44,82,34],[83,45,82,35],[83,46,82,36],[83,52,82,42],[83,54,82,44],[83,61,82,51],[83,63,82,53],[83,72,82,62],[83,73,82,63],[83,74,82,64],[84,4,83,2],[84,5,83,3],[85,4,85,2],[85,10,85,8,"setPatient"],[85,20,85,18],[85,23,85,21],[85,29,85,28,"patient"],[85,36,85,40],[85,40,85,45],[86,6,86,4,"setPatientState"],[86,21,86,19],[86,22,86,20,"patient"],[86,29,86,27],[86,30,86,28],[87,6,87,4],[87,12,87,10,"AsyncStorage"],[87,24,87,22],[87,25,87,22,"default"],[87,32,87,22],[87,33,87,23,"setItem"],[87,40,87,30],[87,41,87,31],[87,50,87,40],[87,52,87,42,"JSON"],[87,56,87,46],[87,57,87,47,"stringify"],[87,66,87,56],[87,67,87,57,"patient"],[87,74,87,64],[87,75,87,65],[87,76,87,66],[88,4,88,2],[88,5,88,3],[89,4,90,2],[89,24,91,4],[89,28,91,4,"_reactJsxDevRuntime"],[89,47,91,4],[89,48,91,4,"jsxDEV"],[89,54,91,4],[89,56,91,5,"AuthContext"],[89,67,91,16],[89,68,91,17,"Provider"],[89,76,91,25],[90,6,91,26,"value"],[90,11,91,31],[90,13,91,33],[91,8,91,35,"user"],[91,12,91,39],[92,8,91,41,"patient"],[92,15,91,48],[93,8,91,50,"token"],[93,13,91,55],[94,8,91,57,"login"],[94,13,91,62],[95,8,91,64,"logout"],[95,14,91,70],[96,8,91,72,"setPatient"],[96,18,91,82],[97,8,91,84,"isLoading"],[98,6,91,94],[98,7,91,96],[99,6,91,96,"children"],[99,14,91,96],[99,16,92,7,"children"],[100,4,92,15],[101,6,92,15,"fileName"],[101,14,92,15],[101,16,92,15,"_jsxFileName"],[101,28,92,15],[102,6,92,15,"lineNumber"],[102,16,92,15],[103,6,92,15,"columnNumber"],[103,18,92,15],[104,4,92,15],[104,11,93,26],[104,12,93,27],[105,2,95,0],[106,2,95,1,"_s"],[106,4,95,1],[106,5,23,16,"AuthProvider"],[106,17,23,28],[107,2,23,28,"_c"],[107,4,23,28],[107,7,23,16,"AuthProvider"],[107,19,23,28],[108,2,97,7],[108,11,97,16,"useAuth"],[108,18,97,23,"useAuth"],[108,19,97,23],[108,21,97,26],[109,4,97,26,"_s2"],[109,7,97,26],[110,4,98,2],[110,10,98,8,"context"],[110,17,98,15],[110,20,98,18],[110,24,98,18,"useContext"],[110,30,98,28],[110,31,98,28,"useContext"],[110,41,98,28],[110,43,98,29,"AuthContext"],[110,54,98,40],[110,55,98,41],[111,4,99,2],[111,8,99,6],[111,9,99,7,"context"],[111,16,99,14],[111,18,99,16],[112,6,100,4],[112,12,100,10],[112,16,100,14,"Error"],[112,21,100,19],[112,22,100,20],[112,64,100,62],[112,65,100,63],[113,4,101,2],[114,4,102,2],[114,11,102,9,"context"],[114,18,102,16],[115,2,103,0],[116,2,103,1,"_s2"],[116,5,103,1],[116,6,97,16,"useAuth"],[116,13,97,23],[117,2,97,23],[117,6,97,23,"_c"],[117,8,97,23],[118,2,97,23,"$RefreshReg$"],[118,14,97,23],[118,15,97,23,"_c"],[118,17,97,23],[119,0,97,23],[119,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","login","logout","setPatient","useAuth"],"mappings":"AAA;OCsB;YCM;GDG;mBEE;GFkB;gBGE;GHsB;iBIE;GJK;qBKE;GLG;CDO;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}