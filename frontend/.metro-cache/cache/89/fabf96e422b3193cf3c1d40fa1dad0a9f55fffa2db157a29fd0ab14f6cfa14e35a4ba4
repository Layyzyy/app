{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [patient, setPatientState] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      // Load user from storage on mount\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const storedUser = await AsyncStorage.default.getItem('user');\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedPatient = await AsyncStorage.default.getItem('patient');\n        if (storedUser && storedToken) {\n          setUser(JSON.parse(storedUser));\n          setToken(storedToken);\n          if (storedPatient) {\n            setPatientState(JSON.parse(storedPatient));\n          }\n        }\n      } catch (error) {\n        console.error('Load user error:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (phone, otp) => {\n      try {\n        const response = await fetch(`${process.env.EXPO_PUBLIC_BACKEND_URL}/api/auth/verify`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            phone,\n            otp\n          })\n        });\n        const data = await response.json();\n        if (data.success) {\n          setUser(data.user);\n          setToken(data.token);\n          await AsyncStorage.default.setItem('user', JSON.stringify(data.user));\n          await AsyncStorage.default.setItem('token', data.token);\n          return true;\n        }\n        return false;\n      } catch (error) {\n        console.error('Login error:', error);\n        return false;\n      }\n    };\n    const logout = async () => {\n      setUser(null);\n      setToken(null);\n      setPatientState(null);\n      await AsyncStorage.default.multiRemove(['user', 'token', 'patient']);\n    };\n    const setPatient = async patient => {\n      setPatientState(patient);\n      await AsyncStorage.default.setItem('patient', JSON.stringify(patient));\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        patient,\n        token,\n        login,\n        logout,\n        setPatient,\n        isLoading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":109,"map":[[13,2,23,0,"exports"],[13,9,23,0],[13,10,23,0,"AuthProvider"],[13,22,23,0],[13,25,23,0,"AuthProvider"],[13,37,23,0],[14,2,97,0,"exports"],[14,9,97,0],[14,10,97,0,"useAuth"],[14,17,97,0],[14,20,97,0,"useAuth"],[14,27,97,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,2,69],[18,6,2,69,"_reactJsxDevRuntime"],[18,25,2,69],[18,28,2,69,"require"],[18,35,2,69],[18,36,2,69,"_dependencyMap"],[18,50,2,69],[19,2,21,0],[19,8,21,6,"AuthContext"],[19,19,21,17],[19,35,21,20],[19,39,21,20,"createContext"],[19,45,21,33],[19,46,21,33,"createContext"],[19,59,21,33],[19,61,21,63,"undefined"],[19,70,21,72],[19,71,21,73],[20,2,23,7],[20,11,23,16,"AuthProvider"],[20,23,23,28,"AuthProvider"],[20,24,23,29],[21,4,23,31,"children"],[22,2,23,71],[22,3,23,72],[22,5,23,74],[23,4,24,2],[23,10,24,8],[23,11,24,9,"user"],[23,15,24,13],[23,17,24,15,"setUser"],[23,24,24,22],[23,25,24,23],[23,28,24,26],[23,32,24,26,"useState"],[23,38,24,34],[23,39,24,34,"useState"],[23,47,24,34],[23,49,24,48],[23,53,24,52],[23,54,24,53],[24,4,25,2],[24,10,25,8],[24,11,25,9,"patient"],[24,18,25,16],[24,20,25,18,"setPatientState"],[24,35,25,33],[24,36,25,34],[24,39,25,37],[24,43,25,37,"useState"],[24,49,25,45],[24,50,25,45,"useState"],[24,58,25,45],[24,60,25,58],[24,64,25,62],[24,65,25,63],[25,4,26,2],[25,10,26,8],[25,11,26,9,"token"],[25,16,26,14],[25,18,26,16,"setToken"],[25,26,26,24],[25,27,26,25],[25,30,26,28],[25,34,26,28,"useState"],[25,40,26,36],[25,41,26,36,"useState"],[25,49,26,36],[25,51,26,52],[25,55,26,56],[25,56,26,57],[26,4,27,2],[26,10,27,8],[26,11,27,9,"isLoading"],[26,20,27,18],[26,22,27,20,"setIsLoading"],[26,34,27,32],[26,35,27,33],[26,38,27,36],[26,42,27,36,"useState"],[26,48,27,44],[26,49,27,44,"useState"],[26,57,27,44],[26,59,27,45],[26,63,27,49],[26,64,27,50],[27,4,29,2],[27,8,29,2,"useEffect"],[27,14,29,11],[27,15,29,11,"useEffect"],[27,24,29,11],[27,26,29,12],[27,32,29,18],[28,6,30,4],[29,6,31,4,"loadUser"],[29,14,31,12],[29,15,31,13],[29,16,31,14],[30,4,32,2],[30,5,32,3],[30,7,32,5],[30,9,32,7],[30,10,32,8],[31,4,34,2],[31,10,34,8,"loadUser"],[31,18,34,16],[31,21,34,19],[31,27,34,19,"loadUser"],[31,28,34,19],[31,33,34,31],[32,6,35,4],[32,10,35,8],[33,8,36,6],[33,14,36,12,"storedUser"],[33,24,36,22],[33,27,36,25],[33,33,36,31,"AsyncStorage"],[33,45,36,43],[33,46,36,43,"default"],[33,53,36,43],[33,54,36,44,"getItem"],[33,61,36,51],[33,62,36,52],[33,68,36,58],[33,69,36,59],[34,8,37,6],[34,14,37,12,"storedToken"],[34,25,37,23],[34,28,37,26],[34,34,37,32,"AsyncStorage"],[34,46,37,44],[34,47,37,44,"default"],[34,54,37,44],[34,55,37,45,"getItem"],[34,62,37,52],[34,63,37,53],[34,70,37,60],[34,71,37,61],[35,8,38,6],[35,14,38,12,"storedPatient"],[35,27,38,25],[35,30,38,28],[35,36,38,34,"AsyncStorage"],[35,48,38,46],[35,49,38,46,"default"],[35,56,38,46],[35,57,38,47,"getItem"],[35,64,38,54],[35,65,38,55],[35,74,38,64],[35,75,38,65],[36,8,40,6],[36,12,40,10,"storedUser"],[36,22,40,20],[36,26,40,24,"storedToken"],[36,37,40,35],[36,39,40,37],[37,10,41,8,"setUser"],[37,17,41,15],[37,18,41,16,"JSON"],[37,22,41,20],[37,23,41,21,"parse"],[37,28,41,26],[37,29,41,27,"storedUser"],[37,39,41,37],[37,40,41,38],[37,41,41,39],[38,10,42,8,"setToken"],[38,18,42,16],[38,19,42,17,"storedToken"],[38,30,42,28],[38,31,42,29],[39,10,43,8],[39,14,43,12,"storedPatient"],[39,27,43,25],[39,29,43,27],[40,12,44,10,"setPatientState"],[40,27,44,25],[40,28,44,26,"JSON"],[40,32,44,30],[40,33,44,31,"parse"],[40,38,44,36],[40,39,44,37,"storedPatient"],[40,52,44,50],[40,53,44,51],[40,54,44,52],[41,10,45,8],[42,8,46,6],[43,6,47,4],[43,7,47,5],[43,8,47,6],[43,15,47,13,"error"],[43,20,47,18],[43,22,47,20],[44,8,48,6,"console"],[44,15,48,13],[44,16,48,14,"error"],[44,21,48,19],[44,22,48,20],[44,40,48,38],[44,42,48,40,"error"],[44,47,48,45],[44,48,48,46],[45,6,49,4],[45,7,49,5],[45,16,49,14],[46,8,50,6,"setIsLoading"],[46,20,50,18],[46,21,50,19],[46,26,50,24],[46,27,50,25],[47,6,51,4],[48,4,52,2],[48,5,52,3],[49,4,54,2],[49,10,54,8,"login"],[49,15,54,13],[49,18,54,16],[49,24,54,16,"login"],[49,25,54,23,"phone"],[49,30,54,36],[49,32,54,38,"otp"],[49,35,54,49],[49,40,54,72],[50,6,55,4],[50,10,55,8],[51,8,56,6],[51,14,56,12,"response"],[51,22,56,20],[51,25,56,23],[51,31,56,29,"fetch"],[51,36,56,34],[51,37,56,35],[51,40,56,38,"process"],[51,47,56,45],[51,48,56,46,"env"],[51,51,56,49],[51,52,56,50,"EXPO_PUBLIC_BACKEND_URL"],[51,75,56,73],[51,93,56,91],[51,95,56,93],[52,10,57,8,"method"],[52,16,57,14],[52,18,57,16],[52,24,57,22],[53,10,58,8,"headers"],[53,17,58,15],[53,19,58,17],[54,12,58,19],[54,26,58,33],[54,28,58,35],[55,10,58,54],[55,11,58,55],[56,10,59,8,"body"],[56,14,59,12],[56,16,59,14,"JSON"],[56,20,59,18],[56,21,59,19,"stringify"],[56,30,59,28],[56,31,59,29],[57,12,59,31,"phone"],[57,17,59,36],[58,12,59,38,"otp"],[59,10,59,42],[59,11,59,43],[60,8,60,6],[60,9,60,7],[60,10,60,8],[61,8,62,6],[61,14,62,12,"data"],[61,18,62,16],[61,21,62,19],[61,27,62,25,"response"],[61,35,62,33],[61,36,62,34,"json"],[61,40,62,38],[61,41,62,39],[61,42,62,40],[62,8,64,6],[62,12,64,10,"data"],[62,16,64,14],[62,17,64,15,"success"],[62,24,64,22],[62,26,64,24],[63,10,65,8,"setUser"],[63,17,65,15],[63,18,65,16,"data"],[63,22,65,20],[63,23,65,21,"user"],[63,27,65,25],[63,28,65,26],[64,10,66,8,"setToken"],[64,18,66,16],[64,19,66,17,"data"],[64,23,66,21],[64,24,66,22,"token"],[64,29,66,27],[64,30,66,28],[65,10,67,8],[65,16,67,14,"AsyncStorage"],[65,28,67,26],[65,29,67,26,"default"],[65,36,67,26],[65,37,67,27,"setItem"],[65,44,67,34],[65,45,67,35],[65,51,67,41],[65,53,67,43,"JSON"],[65,57,67,47],[65,58,67,48,"stringify"],[65,67,67,57],[65,68,67,58,"data"],[65,72,67,62],[65,73,67,63,"user"],[65,77,67,67],[65,78,67,68],[65,79,67,69],[66,10,68,8],[66,16,68,14,"AsyncStorage"],[66,28,68,26],[66,29,68,26,"default"],[66,36,68,26],[66,37,68,27,"setItem"],[66,44,68,34],[66,45,68,35],[66,52,68,42],[66,54,68,44,"data"],[66,58,68,48],[66,59,68,49,"token"],[66,64,68,54],[66,65,68,55],[67,10,69,8],[67,17,69,15],[67,21,69,19],[68,8,70,6],[69,8,71,6],[69,15,71,13],[69,20,71,18],[70,6,72,4],[70,7,72,5],[70,8,72,6],[70,15,72,13,"error"],[70,20,72,18],[70,22,72,20],[71,8,73,6,"console"],[71,15,73,13],[71,16,73,14,"error"],[71,21,73,19],[71,22,73,20],[71,36,73,34],[71,38,73,36,"error"],[71,43,73,41],[71,44,73,42],[72,8,74,6],[72,15,74,13],[72,20,74,18],[73,6,75,4],[74,4,76,2],[74,5,76,3],[75,4,78,2],[75,10,78,8,"logout"],[75,16,78,14],[75,19,78,17],[75,25,78,17,"logout"],[75,26,78,17],[75,31,78,29],[76,6,79,4,"setUser"],[76,13,79,11],[76,14,79,12],[76,18,79,16],[76,19,79,17],[77,6,80,4,"setToken"],[77,14,80,12],[77,15,80,13],[77,19,80,17],[77,20,80,18],[78,6,81,4,"setPatientState"],[78,21,81,19],[78,22,81,20],[78,26,81,24],[78,27,81,25],[79,6,82,4],[79,12,82,10,"AsyncStorage"],[79,24,82,22],[79,25,82,22,"default"],[79,32,82,22],[79,33,82,23,"multiRemove"],[79,44,82,34],[79,45,82,35],[79,46,82,36],[79,52,82,42],[79,54,82,44],[79,61,82,51],[79,63,82,53],[79,72,82,62],[79,73,82,63],[79,74,82,64],[80,4,83,2],[80,5,83,3],[81,4,85,2],[81,10,85,8,"setPatient"],[81,20,85,18],[81,23,85,21],[81,29,85,28,"patient"],[81,36,85,40],[81,40,85,45],[82,6,86,4,"setPatientState"],[82,21,86,19],[82,22,86,20,"patient"],[82,29,86,27],[82,30,86,28],[83,6,87,4],[83,12,87,10,"AsyncStorage"],[83,24,87,22],[83,25,87,22,"default"],[83,32,87,22],[83,33,87,23,"setItem"],[83,40,87,30],[83,41,87,31],[83,50,87,40],[83,52,87,42,"JSON"],[83,56,87,46],[83,57,87,47,"stringify"],[83,66,87,56],[83,67,87,57,"patient"],[83,74,87,64],[83,75,87,65],[83,76,87,66],[84,4,88,2],[84,5,88,3],[85,4,90,2],[85,24,91,4],[85,28,91,4,"_reactJsxDevRuntime"],[85,47,91,4],[85,48,91,4,"jsxDEV"],[85,54,91,4],[85,56,91,5,"AuthContext"],[85,67,91,16],[85,68,91,17,"Provider"],[85,76,91,25],[86,6,91,26,"value"],[86,11,91,31],[86,13,91,33],[87,8,91,35,"user"],[87,12,91,39],[88,8,91,41,"patient"],[88,15,91,48],[89,8,91,50,"token"],[89,13,91,55],[90,8,91,57,"login"],[90,13,91,62],[91,8,91,64,"logout"],[91,14,91,70],[92,8,91,72,"setPatient"],[92,18,91,82],[93,8,91,84,"isLoading"],[94,6,91,94],[94,7,91,96],[95,6,91,96,"children"],[95,14,91,96],[95,16,92,7,"children"],[96,4,92,15],[97,6,92,15,"fileName"],[97,14,92,15],[97,16,92,15,"_jsxFileName"],[97,28,92,15],[98,6,92,15,"lineNumber"],[98,16,92,15],[99,6,92,15,"columnNumber"],[99,18,92,15],[100,4,92,15],[100,11,93,26],[100,12,93,27],[101,2,95,0],[102,2,97,7],[102,11,97,16,"useAuth"],[102,18,97,23,"useAuth"],[102,19,97,23],[102,21,97,26],[103,4,98,2],[103,10,98,8,"context"],[103,17,98,15],[103,20,98,18],[103,24,98,18,"useContext"],[103,30,98,28],[103,31,98,28,"useContext"],[103,41,98,28],[103,43,98,29,"AuthContext"],[103,54,98,40],[103,55,98,41],[104,4,99,2],[104,8,99,6],[104,9,99,7,"context"],[104,16,99,14],[104,18,99,16],[105,6,100,4],[105,12,100,10],[105,16,100,14,"Error"],[105,21,100,19],[105,22,100,20],[105,64,100,62],[105,65,100,63],[106,4,101,2],[107,4,102,2],[107,11,102,9,"context"],[107,18,102,16],[108,2,103,0],[109,0,103,1],[109,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","login","logout","setPatient","useAuth"],"mappings":"AAA;OCsB;YCM;GDG;mBEE;GFkB;gBGE;GHsB;iBIE;GJK;qBKE;GLG;CDO;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}